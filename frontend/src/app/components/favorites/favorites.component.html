<div class="container">
  <h1>Vos articles favoris</h1>
  <ng-container *ngIf="favorites$ | async as favorites; else emptyState">
    <div class="posts-grid" *ngIf="favorites.length > 0">
      <div class="post-card" *ngFor="let post of favorites; trackBy: trackById">
        <div class="post-image">
          <img [src]="getImageUrl(post.imageUrl)" alt="{{post.title}}" loading="lazy">
          <div class="image-overlay"></div>
        </div>
        <div class="post-info">
          <span class="category">{{ formatCategory(post.category) }}</span>
          <h3>{{ post.title || 'Titre indisponible' }}</h3>
          <p class="content">{{ (post.content | slice:0:120) || 'Contenu indisponible' }}...</p>
          <p class="meta">Par {{ post.authorUsername || 'Anonyme' }} le {{ post.createdAt | date:'mediumDate' }}</p>
          <div class="stats">
            <span class="views"><i class="fas fa-eye"></i> {{ post.views || 0 }}</span>
            <span class="likes"><i class="fas fa-heart"></i> {{ post.likes }}</span>
          </div>
          <div class="actions">
            <button 
              class="like-btn" 
              (click)="toggleLike(post.id)" 
              [ngClass]="{'liked': post.isLiked}"
              aria-label="J'aime"
              title="J'aime cet article"
            >
              <i class="fas fa-heart"></i>
              <span>{{ post.likes }}</span>
            </button>
            <button 
              class="favorite-btn" 
              (click)="toggleFavorite(post.id)" 
              [ngClass]="{'favorited': post.isFavorite}"
              aria-label="Retirer des favoris"
              title="Retirer des favoris"
            >
              <i class="fas fa-star"></i>
            </button>
            <a [routerLink]="['/post', post.id]" class="view-btn" title="Lire l'article complet">
              <i class="fas fa-arrow-right"></i> Lire
            </a>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #emptyState>
    <div class="empty-state">
      <i class="fas fa-star"></i>
      <h2>Aucun favori pour le moment</h2>
      <p>Ajoutez des articles à vos favoris en cliquant sur l'étoile dans les articles qui vous plaisent.</p>
      <a routerLink="/" class="browse-posts">
        <i class="fas fa-search"></i> Découvrir des articles
      </a>
    </div>
  </ng-template>
</div>